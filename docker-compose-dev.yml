version: "3.8"

services:
  dbfuse-ai:
    container_name: dbfuse-ai-dev
    image: node:22-alpine
    working_dir: /workspace
    command: sh -c "npm install && npm run start"
    ports:
      - "5000:5000"
    environment:
      - PORT=5000
      - DBFUSE_USERNAME=admin
      - DBFUSE_PASSWORD=admin
      - AI_PROVIDER=gemini
      - AI_MODEL=gemini-2.5-flash
      - AI_API_KEY=
      - BODY_SIZE=50mb
    volumes:
      - ./:/workspace
      - /workspace/node_modules
    extra_hosts:
      - "host.docker.internal:host-gateway"
    tty: true
